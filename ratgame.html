<head>
  <style>
    #ratContainer {
  background-image: url(https://raw.githubusercontent.com/bloomymarsh/bloomymarsh.github.io/6067751029d0e98b0151c7ae14e6abc5328a2066/Ratatouille.svg);
  width: 315px;
  height: 650px;
  overflow: hidden;
  justify-content: unset;
  align-items: unset;
  position: relative;
}

button {
  background: black;
  color: white;
  font-weight: bold;
  font-size: 20px;
  position: absolute;
  top: 30px;
  left: 50%;
  transform: translateX(-50%);
  width: 250px;
  padding: 5px 5px;
  cursor: pointer;
  align-content: center;
}

#gameTitle {
  animation: pulse 1s steps(1) infinite;
  position: absolute;
  bottom: 55px;
  right: 55px;
  color: black;
  z-index: 10;
  font-weight: bold;
  text-align: right;
  line-height: .80;
}

@keyframes pulse {
  0% {
    transform: scale(1); /* Initial size */
  }
  50% {
    transform: scale(1.2); /* Bigger size */
  }
  100% {
    transform: scale(1); /* Back to original size */
  }
}

#score {
  position: absolute;
  bottom: 75px;
  right: 65px;
  font-weight: bold;
  font-size: 60px;
}

#time {
  /*   display: none; */
  background: black;
  border: 2px solid grey;
  color: white;
  font-weight: bold;
  font-size: 20px;
  position: absolute;
  top: 30px;
  right: 50%;
  transform: translateX(50%); /* Center horizontally (same as button) */
  width: 235px; /* Same width as button */
  padding: 5px 5px; /* Same padding as button */
  text-align: center; /* Align text in the center */
}

#popupContainer {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-110%, -200%);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 10; /* Make sure the image is on top */
}

#popupImage {
  width: 100px; /* Adjust the size of the image */
  height: auto;
}

#rat {
  width: 80%;
  transform: translate(0px, 100px) rotate(35deg);
  cursor: pointer;
}

@keyframes rat1 {
  0% {
    transform: translateX(-320px) translateY(550px) rotate(-135deg);
  }
  50% {
    transform: translateX(320px) translateY(-100px) rotate(-135deg);
  }
  51% {
    transform: translateX(320px) translateY(-200px) rotate(45deg);
  }
  100% {
    transform: translateX(-320px) translateY(550px) rotate(45deg);
  }
}

#paw {
  position: absolute;
  width: 100%;
  bottom: 150px;
  left: 200px;
  transform: rotate(-20deg);
  transform-origin: bottom center;
  transition: transform 0.2s;
  pointer-events: none;
}
  </style>
</head>



<body>
  <div id="ratContainer">
  <div id="movingBox">
    <img id="rat" src="https://raw.githubusercontent.com/bloomymarsh/bloomymarsh.github.io/refs/heads/main/11.png" alt="rat">
    <img id="paw" src="https://raw.githubusercontent.com/bloomymarsh/bloomymarsh.github.io/refs/heads/main/12.png" alt="cat paw">
  </div>
  <div id="score"></div>
  <div id="time"><span id="timer"></span></div>
  <div id="circle" style="z-index: 100;"></div>
  <div id="gameTitle"></div>
  <div id="popupContainer"></div>
  <button id="startButton">START</button>
  <button id="restartButton" style="display: none;">RESTART</button>
</div>
  </div>




  <script>
    // UI
const rat = document.getElementById("rat");
const paw = document.getElementById("paw");
const scoreDisplay = document.getElementById("score");
const timerElement = document.getElementById("time");
const startButton = document.getElementById("startButton");
const restartButton = document.getElementById("restartButton");
const popupImage = document.createElement("img");
popupImage.src =
  "https://raw.githubusercontent.com/bloomymarsh/bloomymarsh.github.io/refs/heads/main/!!!.png";
popupImage.alt = "Popup Image 1";
popupImage.style.width = "100px";
popupImage.style.height = "auto";

// Init
let score = 0;
let gameActive = false;
let timer;
let gameTime = 10;
gameTitle.innerHTML = `<span style="font-size: 40px; font-weight: bold;">Hit</span><br><span style="font-size: 50px;">the</span><br><span style="font-size: 60px;">Rat</span>
  `;

// Collision Detection
const circle = document.getElementById("circle");
const circleRadius = circle.offsetWidth / 2;
let circleCenterX = circle.offsetLeft + circleRadius;
let circleCenterY = circle.offsetTop + circleRadius;

// Collision detection function
function checkCollision() {
  const ratRect = rat.getBoundingClientRect();
  const ratCenterX = ratRect.left + ratRect.width / 2;
  const ratCenterY = ratRect.top + ratRect.height / 2;

  const distance = Math.sqrt(
    Math.pow(ratCenterX - circleCenterX, 2) +
      Math.pow(ratCenterY - circleCenterY, 2)
  );

  return distance <= circleRadius;
}

// Collision effect
rat.addEventListener("click", () => {
  if (gameActive && checkCollision()) {
    score++;
    scoreDisplay.textContent = `${score}`;
    console.log("Score added!");
    if (score > 0 && scoreDisplay.style.display === "none") {
      scoreDisplay.style.display = "block"; // Show score display once score increases from 0
    }

    // Only append the popup image if it's not already appended
    if (!popupContainer.contains(popupImage)) {
      popupContainer.appendChild(popupImage);

      // Remove the popup image after 1 second
      setTimeout(() => {
        if (popupContainer.contains(popupImage)) {
          popupContainer.removeChild(popupImage);
        }
      }, 100);
    }

    // Set a timeout to remove the score after 1 second (1000 ms)
    setTimeout(() => {
      scoreDisplay.textContent = ""; // Remove the score text
    }, 1000); // Timeout duration in milliseconds
  } else {
    console.log("Missed! Rat not in the circle.");
  }
});

// Monitor rat position
function monitorRatPosition() {
  if (gameActive && checkCollision()) {
    console.log("Rat is inside the circle!");
  }
  if (gameActive) {
    requestAnimationFrame(monitorRatPosition);
  }
}

// Start game function
function startGame() {
  score = 0;
  scoreDisplay.textContent = `${score}`;
  gameActive = true;

  rat.style.animation = "rat1 4s linear infinite";
  gameTitle.style.display = "none";
  scoreDisplay.style.display = "none"; // Hide score initially

  // Show the timer when the game starts
  console.log("Showing timer...");
  timerElement.textContent = gameTime;

  // Start the game timer
  timer = setInterval(function () {
    gameTime--;
    timerElement.textContent = gameTime; // Update the timer display
    if (gameTime <= 0) {
      clearInterval(timer);
      endGame();
    }
  }, 1000);

  startButton.style.display = "none"; // Hide start button once the game starts
  restartButton.style.display = "none"; // Hide restart button during game
  monitorRatPosition(); // Start monitoring the rat
}

// Add click event listener for paw movement
document.addEventListener("click", () => {
  if (gameActive) {
    // Ensure the game has started
    // Move the paw
    paw.style.transform = "rotate(-60deg)";
    setTimeout(() => {
      paw.style.transform = "rotate(-20deg)";
    }, 200);
  }
});

// End game function
function endGame() {
  rat.style.animation = "none";
  gameActive = false;
  console.log("Game Over!");
  restartButton.style.display = "inline"; // Show restart button
  gameTitle.style.display = "block";
  gameTitle.innerHTML = `<span style="font-size: 60px; font-weight: bold;">${score}</span><br><span style="font-size: 25px;">Hit   âœ§<br>Score</span>
  `;
}

// Restart game function
function restartGame() {
  // Reset game state
  rat.style.animation = "none";
  gameTime = 10; // Reset the game time
  score = 0; // Reset score
  timerElement.textContent = gameTime; // Reset the timer display

  // Hide restart button
  restartButton.style.display = "none";

  // Start the game again
  startGame();
}

// Event listeners for buttons
startButton.addEventListener("click", startGame);
restartButton.addEventListener("click", restartGame);
  </script>
</body>
</html>
